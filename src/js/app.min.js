$(function () {
    var n, t = document, a = t.body, e = t.documentElement, o = Asfm.browser.jsVendor, s = t.documentElement.clientWidth;
    t.documentElement.clientHeight, window.devicePixelRatio;
    n = 750 <= s ? 100 : s / 750 * 100, console.log(n), console.log(e.style.fontSize);
    var i, r, l, c, u = !0, p = (t.getElementById("video"), t.getElementById("video-canvas"), t.getElementById("bgm"), t.getElementById("camera"), t.getElementById("click-btn-audio")), m = t.getElementById("click-marker-audio"), g = null, d = null, f = null, b = null, w = null, x = null, h = [{
        src: "images/page3/result-A-1.png",
        min: 1,
        max: 5,
        type: "成熟远见型",
        text: "善于沟通，明确目标，团队协作是你的强项；坦诚待人，任何成果和想法都会积极分享；你能敏锐发现他人的优点，并给予认可和尊重；喜欢挑战自我，努力成为行业标杆。"
    }, {
        src: "images/page3/result-B-1.png",
        min: 6,
        max: 10,
        type: "知爱关心型",
        text: "善于沟通，明确目标，团队协作是你的强项；坦诚待人，任何成果和想法都会积极分享；各人有各人的烟火，你懂得尊重、包容不同的人；应对变化环境，能自我调整，做出最稳定的发挥。"
    }, {
        src: "images/page3/result-C-1.png",
        min: 11,
        max: 15,
        type: "机智远见型",
        text: "善于沟通，明确目标，团队协作是你的强项；从不隐瞒自己的不足，有话直说；你内心温柔，在他人需要帮助时能尽力提供支持；喜欢挑战自我，努力成为行业标杆。"
    }, {
        src: "images/page3/result-D-1.png",
        min: 16,
        max: 20,
        type: "阳光真诚型",
        text: "善于沟通，明确目标，团队协作是你的强项；坦诚待人，任何成果和想法都会积极分享；你能敏锐发现他人的优点，并给予认可和尊重；能为达成目标坚持不懈，自我驱动承担更多责任。"
    }], T = null, v = null, y = 1;
    c = 750 <= s ? (i = 750, r = 1448, l = 5500, 5550) : (i = s / 750 * 100 * 7.5, r = s / 750 * 100 * 14.48, l = s / 750 * 100 * 55, s / 750 * 100 * 55.5), console.log(r);
    var q = i / 750, O = r / 1448;
    console.log(O);
    var C, I, A, E, P, M, R, S, N, k, _, B, L, D, V, j = null, z = null, H = null, W = null, Y = 0, J = 0, U = !0, X = 2, Q = 0, F = 0, G = 0, K = 0, Z = 0, ee = 0, ne = null, te = null, ae = "扫码开启发现之旅", oe = "探秘你的蔚来基因";

    function se(e) {
        $(".loading-box>p").text(Math.ceil(100 * e.loaded) + "%")
    }

    function ie() {
        $("#loading-box").fadeOut(), $(".main").fadeIn(), $("#page0").fadeIn(function () {
            g.page0.add(TweenMax.to(".page0-picture-box", 2.5, {
                y: 500 * O,
                ease: Power1.easeInOut,
                onComplete: function () {
                }
            }), "+=.5"), g.page0.add(TweenMax.to(".image-1-0", 2.5, {
                y: 100 * O,
                ease: Power1.easeInOut,
                onComplete: function () {
                }
            }), "-=2.5"), g.page0.add(TweenMax.to(".page0-text1", .5, {
                y: -50 * O,
                opacity: 1,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=.5"), g.page0.add(TweenMax.to(".page0-picture-box", 6, {
                y: 5500 * O,
                ease: Power3.easeInOut,
                onComplete: function () {
                }
            }), "+=1.5"), g.page0.add(TweenMax.to(".image-1-1", 1, {
                y: -50 * O,
                ease: Power1.easeInOut,
                onComplete: function () {
                }
            }), "-=5"), g.page0.add(TweenMax.to(".page0-text1", .5, {
                y: -100 * O,
                opacity: 0,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=5"), g.page0.add(TweenMax.to(".position5-7", 1, {
                y: -100 * O,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=2"), g.page0.add(TweenMax.to(".page0-text2", .5, {
                y: -50 * O,
                opacity: 1,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=2"), g.page0.add(TweenMax.to(".page0-picture-box", 2.5, {
                y: 7500 * O,
                ease: Power1.easeInOut,
                onComplete: function () {
                }
            }), "+=1.5"), g.page0.add(TweenMax.to(".position5-6", 1, {
                y: 50 * O,
                ease: Power1.easeInOut,
                onComplete: function () {
                }
            }), "-=2.5"), g.page0.add(TweenMax.to(".page0-text2", .5, {
                y: -100 * O,
                opacity: 0,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=2.5"), g.page0.add(TweenMax.to(".position6-8", 2, {
                y: 100 * O,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=1"), g.page0.add(TweenMax.to(".position7-9", 2, {
                y: 150 * O,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=2"), g.page0.add(TweenMax.to(".page0-text3", .5, {
                y: -50 * O,
                opacity: 1,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=2"), g.page0.add(TweenMax.to(".page0-picture-box", 2.5, {
                y: 10050 * O,
                ease: Power1.easeInOut,
                onComplete: function () {
                    $("#page1").fadeIn(function () {
                        $("#page0").fadeOut(), re()
                    })
                }
            }), "+=1.5"), g.page0.add(TweenMax.to(".page0-text3", .5, {
                y: -100 * O,
                opacity: 0,
                ease: Power1.easeOut,
                onComplete: function () {
                }
            }), "-=2.5"), g.page0.restart()
        })
    }

    function re() {
        v = setInterval(function () {
            $(".home-page" + y).fadeIn(1e3).siblings().fadeOut(1e3), 3 < ++y && (y = 1)
        }, 3e3), g.page1.restart(), j.play()
    }

    a.style[o + "TouchCallout"] = "none", a.style[o + "UserSelect"] = "none", a.style[o + "TextSizeAdjust"] = "none", a.style[o + "TapHighlightColor"] = "rgba(0,0,0,0)", Asfm.browser.supportOrientation && window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", function () {
        window.location = location
    }, !1), function () {
        (j = new picturedAnimation).setVal("homecanvas", 0, 0, 460, 860, "images/page1/", 1, 17, "png", 6, !0, function () {
            console.log("picture anmination complete.")
        }), (z = new picturedAnimation).setVal("q3-anima", 0, 0, 300, 312, "images/page2/", 1, 16, "png", 6, !0, function () {
            console.log("picture anmination complete.")
        }), (H = new picturedAnimation).setVal("q4-anima", 0, 0, 389, 121, "images/page2/question4/", 1, 16, "png", 6, !0, function () {
            console.log("picture anmination complete.")
        }), (W = new picturedAnimation).setVal("q5-anima", 0, 0, 125, 176, "images/page2/question5/", 1, 16, "png", 6, !1, function () {
            console.log("picture anmination complete.")
        }), swiper4 = new Swiper("#swiper4", {
            autoplay: !0,
            allowTouchMove: !1,
            observer: !0,
            observeParents: !0,
            on: {
                init: function () {
                }
            }
        }), T = new Howl({
            src: ["music/bgm-1.mp3"], loop: !0, volume: 1, onend: function () {
            }
        }), Asfm.browser.wechat ? "undefined" == typeof WeixinJSBridge && t.addEventListener("WeixinJSBridgeReady", function () {
        }, !1) : Asfm.browser.weibo && $(".p3-2").hide(), (Asfm.browser.iphone || Asfm.browser.ipad) && a.addEventListener(Asfm.browser.POINTER_END, function (e) {
            var n = (new Date).getTime(), t = n - (x = x || n + 1);
            if (0 < t && t < 500)return e.preventDefault();
            x = n
        }, !1), t.oncontextmenu = function (e) {
            e.preventDefault()
        }, $("html,body,.loading-box,.main,.main>div,.video-box,video,.popup-box,.popup-box>div").on(Asfm.browser.POINTER_MOVE, function (e) {
            e.preventDefault()
        }), $("textarea,input").blur(function () {
            $("html,body").stop().animate({scrollTop: "0"}, 100)
        }), g = {};
        for (var e = 0; e < 5; e++)g["page" + e] = new TimelineMax({
            paused: !0, onComplete: function () {
            }
        });
        new TimelineMax({paused: !0}), d = new TimelineMax({paused: !0}), f = new TimelineMax({paused: !0}), t.addEventListener("visibilitychange", function () {
            t.hidden ? Asfm.browser.android && T.pause() : 1 == u && Asfm.browser.android
        })
    }(), w = [{src: "images/page4/level1-canvas-1.png"}, {src: (D = "images/page0/") + "image1.png"}, {src: D + "image2.png"}, {src: D + "image3.png"}, {src: D + "image4.png"}, {src: D + "image5.png"}, {src: D + "image6.png"}, {src: D + "image7.png"}, {src: D + "image8.png"}, {src: D + "image9.png"}, {src: D + "image10.png"}, {src: D + "image11.png"}, {src: D + "image12.png"}, {src: (V = "images/page1/") + "1.png"}, {src: V + "2.png"}, {src: V + "3.png"}, {src: V + "4.png"}, {src: V + "5.png"}, {src: V + "6.png"}, {src: V + "7.png"}, {src: V + "8.png"}, {src: V + "9.png"}, {src: V + "10.png"}, {src: V + "11.png"}, {src: V + "12.png"}, {src: V + "13.png"}, {src: V + "14.png"}, {src: V + "15.png"}, {src: V + "16.png"}, {src: V + "17.png"}, {
        id: "maps",
        src: "images/map0704-new.png"
    }], (b = new createjs.LoadQueue(!0)).on("fileload", function (e) {
        console.log(e), "maps" == e.item.id && $("#map").css({
            background: "url(" + e.item.src + ") no-repeat",
            "background-size": "100% 100%"
        })
    }), b.addEventListener("progress", se), b.addEventListener("complete", ie), b.setMaxConnections(1), b.loadManifest(w), g.page1.add(TweenMax.from(".home-title", .8, {
        alpha: 0,
        y: -100 * O,
        ease: Linear.easeNone,
        onComplete: function () {
        }
    }), "+=.5"), g.page1.add(TweenMax.from(".page1-logo", .8, {
        alpha: 0,
        y: -100 * O,
        ease: Linear.easeNone,
        onComplete: function () {
        }
    }), "-=.3"), g.page1.add(TweenMax.from(".homebtn", .8, {
        alpha: 0,
        y: 200 * O,
        ease: Linear.easeNone,
        onComplete: function () {
        }
    }), "-=0.8"), g.page2.add(TweenMax.from(".q1-bg", .8, {
        scale: .5, ease: Power2.easeOut, onComplete: function () {
        }, onStart: function () {
        }
    }), "+=0"), g.page2.add(TweenMax.from(".q1-main", .8, {
        y: 250 * O, ease: Power2.easeOut, onComplete: function () {
        }
    }), "-=0.8"), d.add(TweenMax.to(".q1-bg", .8, {
        scale: 1, ease: Power2.easeOut, onComplete: function () {
        }, onStart: function () {
        }
    }), "+=0"), d.add(TweenMax.to(".q1-main", .8, {
        y: 250 * O, ease: Power2.easeOut, onComplete: function () {
        }
    }), "-=0.8"), f.add(TweenMax.to(".q2-anima", 1.5, {
        x: 71 * q,
        y: 43 * O,
        ease: Power2.easeOut,
        onComplete: function () {
        }
    }), "+=1"), $("#play-again").on("touchstart", function () {
        g.page1.pause(0, !1), d.pause(0, !1), f.pause(0, !1), ee = 0, z.stop(), H.stop(), $(".hand2").show(), $("#page3").fadeOut(), $("#page1").fadeIn(function () {
            re(), $(".homebtn").fadeIn()
        }), X = 2, $("#map").css({
            transform: "translate(-17.72rem,-14.28rem) scale(1)",
            transformOrigin: "44.54rem 29.74rem"
        }), $(".markers2").show(), $(".markers3").show(), $(".markers4").show(), $(".markers5").show(), $("#page2 .nextbtn").hide(), g.page2.pause(0, !1), $(".question-box-1 .question-item.active").removeClass("active"), $(".question-box-2 .question-item.active").removeClass("active"), $(".question-box-3 .question-item.active").removeClass("active"), $(".question-box-4 .question-item.active").removeClass("active"), $(".question-box-5 .question-item.active").removeClass("active"), $("#question1 .question-btn").addClass("disiabled"), $("#question2 .question-btn").addClass("disiabled"), $("#question3 .question-btn").addClass("disiabled"), $("#question4 .question-btn").addClass("disiabled"), $("#question5 .question-btn").addClass("disiabled"), $(".q1-bg").css({transform: "scale(1.1)"}), $(".q1-main").css({transform: "initial"}), te.clearRect(0, 0, ne.width, ne.height)
    }), $(".markers2").on("touchstart", function (e) {
        m.play(), $("#map").css({transition: "all 2s ease-out"}), U = !1, $(".nextbtn").fadeOut(), $(this).fadeOut(), $("#map").css({transform: "translate(-40.79rem,-13.5rem) scale(1.7)"}), f.restart(), $("#question2").fadeIn(1500)
    }), $(".markers3").on("touchstart", function (e) {
        3 != X ? alert("先去找第" + X + "题吧") : (m.play(), $("#map").css({transition: "all 2s ease-out"}), U = !1, $(".nextbtn").fadeOut(), $(this).fadeOut(), $("#map").css({transform: "translate(-5.96rem,-4.65rem) scale(1.7)"}), $("#question3").fadeIn(1500), z.play())
    }), $(".markers4").on("touchstart", function (e) {
        4 != X ? alert("先去找第" + X + "题吧") : (m.play(), $("#map").css({transition: "all 2s ease-out"}), U = !1, $(".nextbtn").fadeOut(), $(this).fadeOut(), $("#map").css({transform: "translate(-5.88rem,-22.24rem) scale(1.7)"}), $("#question4").fadeIn(1500), H.play())
    }), $(".markers5").on("touchstart", function (e) {
        5 != X ? alert("先去找第" + X + "题吧") : (m.play(), $("#map").css({transition: "all 2s ease-out"}), U = !1, $(".nextbtn").fadeOut(), $(this).fadeOut(), $("#map").css({transform: "translate(-39.62rem,-36.22rem) scale(1.7)"}), W.play(), $("#question5").fadeIn(1500))
    }), $("#map").on("touchstart", function (e) {
        0 != U && ($("#popup-box").is(":visible") && ($("#popup-page2").fadeOut(), $("#popup-box").fadeOut(), $(".hand2").hide()), C = e.originalEvent.targetTouches[0].pageX, console.log(C), I = e.originalEvent.targetTouches[0].pageY, console.log(I), $(".nextbtn").hide())
    }), $("#map").on("touchmove", function (e) {
        0 != U && (B = $("#map").offset().left, L = $("#map").offset().top, A = e.originalEvent.targetTouches[0].pageX, E = e.originalEvent.targetTouches[0].pageY, P = A - C, M = E - I, C < A && k - B <= P && (P = k - B), A < C && P <= i + k - (l + B) && (P = i + k - (l + B)), I < E && _ - L <= M && (M = _ - L), E < I && M <= r + _ - (c + L) && (M = r + _ - (c + L)), Y = B + P, J = L + M, $("#map").css({
            transition: "none",
            transform: "translate(" + (Y - k) / n + "rem," + (J - _) / n + "rem) scale(1)"
        }), C = A, I = E)
    }), $("#map").on("touchend", function (e) {
        0 != U && $(".nextbtn").show()
    }), $("#page2 .nextbtn").on(Asfm.browser.POINTER_START, function () {
        p.play(), $("#map").css({transition: "all 2s ease-out"}), 2 == X && ($("#popup-box").fadeOut(), $("#popup-page2").fadeOut(), $(".hand2").hide(), $("#map").css({transform: "translate(-40.79rem,-13.5rem) scale(1)"})), 3 == X && $("#map").css({transform: "translate(-5.96rem,-4.65rem) scale(1)"}), 4 == X && $("#map").css({transform: "translate(-5.88rem,-22.24rem) scale(1)"}), 5 == X && $("#map").css({transform: "translate(-39.62rem,-36.22rem) scale(1)"})
    }), $("#question1 .question-btn").on(Asfm.browser.POINTER_START, function () {
        var e = $(this).hasClass("disiabled");
        console.log(e), p.play(), e || ($("#map").fadeIn(function () {
            $(".nextbtn").fadeIn(), $("#popup-box").show(), $("#popup-page2").show(), z.play(), setTimeout(function () {
                z.stop()
            }, 200), H.play(), setTimeout(function () {
                H.stop()
            }, 200), W.play(), setTimeout(function () {
                W.stop()
            }, 200), k = $("#page2").offset().left, _ = $("#page2").offset().top, console.log("offsetDefaultTopY" + _)
        }), $("#question1").fadeOut(), d.restart())
    }), $("#question2 .question-btn").on(Asfm.browser.POINTER_START, function () {
        var e = $(this).hasClass("disiabled");
        console.log(e), p.play(), e || (U = !0, $(".nextbtn").fadeIn(), $("#question2").fadeOut(1500, function () {
            $("#map").css({"transform-origin": "9.71rem 22.89rem"})
        }), $("#map").css({transform: "translate(-40.79rem,-13.5rem) scale(1)"}), X = 3)
    }), $("#question3 .question-btn").on(Asfm.browser.POINTER_START, function () {
        var e = $(this).hasClass("disiabled");
        console.log(e), p.play(), e || (U = !0, $(".nextbtn").fadeIn(), $("#question3").fadeOut(1500, function () {
            $("#map").css({"transform-origin": "9.71rem 39.89rem"})
        }), $("#map").css({transform: "translate(-5.96rem,-4.65rem) scale(1)"}), X = 4)
    }), $("#question4 .question-btn").on(Asfm.browser.POINTER_START, function () {
        var e = $(this).hasClass("disiabled");
        console.log(e), p.play(), e || (U = !0, $(".nextbtn").fadeIn(), $("#question4").fadeOut(1500, function () {
            $("#map").css({"transform-origin": "42.63rem 52.48rem"})
        }), $("#map").css({transform: "translate(-5.88rem,-22.24rem) scale(1)"}), X = 5)
    }), $("#question5 .question-btn").on(Asfm.browser.POINTER_START, function () {
        var e = $(this).hasClass("disiabled");
        console.log(e), p.play(), e || (ee = Q + F + G + K + Z, console.log(ee), U = !0, $(".nextbtn").fadeIn(), $("#question5").fadeOut(1500), $("#map").css({transform: "translate(-39.62rem,-36.22rem) scale(1)"}), h.forEach(function (e, n) {
            ee >= e.min && ee <= e.max && (R = e.type, S = e.text, N = e.src)
        }), console.log(R), console.log(S), console.log(N), $(".page3-all-bg").css({backgroundImage: "url(" + N + ")"}), $(".result-type").text(R), $(".result-text").text(S), function () {
            ne = document.getElementById("final-canvas"), te = ne.getContext("2d");
            var n = new Image;
            n.src = N, n.onload = function () {
                te.drawImage(n, 0, 0, n.width, n.height);
                var e = new Image;
                e.src = "images/qr-code.png", e.onload = function () {
                    te.drawImage(e, 608, 1330, e.width, e.height);
                    var o = new Image;
                    o.src = "images/logo-black.png", o.onload = function () {
                        te.drawImage(o, 60, 1350, o.width, o.height), te.font = "normal normal normal 22px Arial", te.fillStyle = "#7a8a8a", ae.split("").forEach(function (e, n) {
                            te.fillText(e, 400 + 22 * n + 8, 1360)
                        }), oe.split("").forEach(function (e, n) {
                            te.fillText(e, 400 + 22 * n + 8, 1395)
                        }), te.font = "normal normal normal 22px Arial", te.fillStyle = "#000";
                        var e = "", n = "", t = "";
                        29 < S.length ? (e = S.substring(0, 29), te.fillText(e, 63, 1200)) : te.fillText(S, 63, 1200), 29 < S.length && S.length <= 58 && (n = S.substring(29, S.length), te.fillText(n, 63, 1240)), 58 < S.length && (n = S.substring(29, 58), te.fillText(n, 63, 1240), t = S.substring(58, S.length), te.fillText(t, 63, 1280)), te.font = "normal normal 100 72px Arial", te.fillStyle = "#000", te.fillText(R, 328, 1150);
                        var a = ne.toDataURL("images/jpeg", 1);
                        $(".poster-image").attr("src", a)
                    }
                }
            }
        }(), $("#page2").fadeOut(), $("#page3").fadeIn())
    }), $(".question-box-1 .question-item").on(Asfm.browser.POINTER_START, function () {
        var e = Number($(this).attr("data-score"));
        console.log(typeof e), Q = e, console.log(Q), $(this).addClass("active").siblings().removeClass("active"), $("#question1 .question-btn").removeClass("disiabled")
    }), $(".question-box-2 .question-item").on(Asfm.browser.POINTER_START, function () {
        var e = Number($(this).attr("data-score"));
        console.log(typeof e), F = e, console.log(F), $(this).addClass("active").siblings().removeClass("active"), $("#question2 .question-btn").removeClass("disiabled")
    }), $(".question-box-3 .question-item").on(Asfm.browser.POINTER_START, function () {
        var e = Number($(this).attr("data-score"));
        console.log(typeof e), G = e, console.log(G), $(this).addClass("active").siblings().removeClass("active"), $("#question3 .question-btn").removeClass("disiabled")
    }), $(".question-box-4 .question-item").on(Asfm.browser.POINTER_START, function () {
        var e = Number($(this).attr("data-score"));
        console.log(typeof e), K = e, console.log(K), $(this).addClass("active").siblings().removeClass("active"), $("#question4 .question-btn").removeClass("disiabled")
    }), $(".question-box-5 .question-item").on(Asfm.browser.POINTER_START, function () {
        var e = Number($(this).attr("data-score"));
        console.log(typeof e), Z = e, console.log(Z), $(this).addClass("active").siblings().removeClass("active"), $("#question5 .question-btn").removeClass("disiabled")
    }), $(".marker1").on(Asfm.browser.POINTER_START, function () {
        clearInterval(v), m.play(), $("#page1").fadeOut(1500), $("#page2").fadeIn(1e3), $("#question1").fadeIn(1e3), g.page2.restart(), $(this).hide()
    }), $(".to-page1-btn").on(Asfm.browser.POINTER_START, function () {
        p.play(), $("#page1").fadeIn(function () {
            $("#page0").fadeOut(), re(), g.page0.pause(0, !1)
        })
    }), $(".homebtn").on(Asfm.browser.POINTER_START, function () {
        TweenMax.from(".marker1", .8, {
            alpha: 0, y: -450 * O, ease: Back.easeOut, onComplete: function () {
            }, onStart: function () {
                $(".marker1").show()
            }
        }), $(".homebtn").fadeOut(), p.play()
    }), $(".error-content-box").on("touchstart", function (e) {
        $(this).fadeOut()
    })
});